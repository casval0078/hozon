<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>ひみつの動画</title>
    <style>
        body {
            background-color: #C5EBE5; /* 背景色の指定 */
            color: #AE0019; /* テキストの色を指定 */
            font-family: Arial, sans-serif; /* フォントファミリーの指定 */
            margin: 0; /* マージンを0に設定 */
            height: 100vh; /* ビューポートの高さを100%に設定 */
        }
        h1 {
            color: #AE0019; /* タイトルの文字色を指定 */
            text-align: center; /* タイトルを中央揃え */
            margin-top: 20px; /* 上部マージンを設定 */
        }
        /* ul { */
        /*   list-style-type: none; /* リストのスタイルタイプを無しに設定 */ */
        /*   padding: 0; /* パディングを0に設定 */ */
        /*   text-align: center; /* リストを中央揃え */ */
        /* } */
        li {
            margin-bottom: 15px; /* 行間を開ける */
        }
        li::before {
            content: "\1F4F9"; /* ビデオカメラアイコン */
            margin-right: 10px; /* アイコンとテキストの間にスペースを設定 */
        }
        li a {
            color: #AE0019; /* リンクの文字色を指定 */
            text-decoration: none; /* テキストデコレーションを無しに設定 */
            display: block; /* リンクをブロック要素に設定 */
            padding: 10px; /* パディングを設定 */
        }
        li a:hover {
            background-color: rgba(255, 255, 255, 0.2); /* ホバー時の背景色を設定 */
        }
    </style>
</head>
<body>
    <h1>花御's collection</h1>
    <ul id="mediaList"></ul>

    <!-- Firebase SDKの追加 (モジュールとして) -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js';
        import { getStorage, ref, listAll, getDownloadURL } from 'https://www.gstatic.com/firebasejs/10.12.0/firebase-storage.js';

        // Firebase設定の初期化
        const firebaseConfig = {
            apiKey: "AIzaSyBf1jDkivK4IjWhK613ysNhlhfJrVa5Z4s",
            authDomain: "hozon-4794d.firebaseapp.com",
            projectId: "hozon-4794d",
            storageBucket: "hozon-4794d.appspot.com",
            messagingSenderId: "363639067783",
            appId: "1:363639067783:web:89c021b8c297cf60e2d422",
            measurementId: "G-NKKQJM5VQY"
        };
        const app = initializeApp(firebaseConfig);
        const storage = getStorage(app);

        // メディアリストを取得して表示
        async function loadMediaList() {
            const mediaList = document.getElementById('mediaList');
            const storageRef = ref(storage); 

            try {
                const result = await listAll(storageRef);
                const sortedItems = result.items.sort((a, b) => a.name.localeCompare(b.name)); // 名前でソート

                const links = await Promise.all(sortedItems.map(async (itemRef) => {
                    const url = await getDownloadURL(itemRef);
                    const li = document.createElement('li');
                    const link = document.createElement('a');
                    link.href = `play.html?mediaUrl=${encodeURIComponent(url)}`;
                    link.textContent = itemRef.name;
                    link.target = '_blank';
                    li.appendChild(link);
                    return li;
                }));

                links.forEach(li => mediaList.appendChild(li));
            } catch (error) {
                console.log('Error loading media list:', error);
            }
        }

        window.onload = loadMediaList;
    </script>
</body>
</html>
